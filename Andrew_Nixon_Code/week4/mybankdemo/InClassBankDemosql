create user testBank
IDENTIFIED by p4ssw0rd;

GRANT CONNECT to testBank;
GRANT RESOURCE to testBank;

create table USERS(
USERID number not null,
FIRSTNAME VARCHAR2(20) not NULL,
LASTNAME VARCHAR2(20) NOT NULL,
EMAIL VARCHAR2(50) NOT NULL,
PASSWORD VARCHAR2(50) NOT NULL,
PRIMARY KEY (USERID)
);
--firstname, lastname, email, password

CREATE SEQUENCE U_SEQ
START WITH 1
INCREMENT BY 1;
/
--TRIGGER
CREATE OR REPLACE TRIGGER u_trigger
BEFORE INSERT ON USERS
FOR EACH ROW
BEGIN
SELECT U_SEQ.NEXTVAL INTO :new.USERID FROM DUAL;
END;
/

create table ACCOUNT(
ACCOUNTID number not null,
BALANCE NUMBER NOT NULL,
USERID NUMBER NOT NULL,
TYPEID NUMBER NOT NULL,
PRIMARY KEY (ACCOUNTID),
CONSTRAINT FK_ACCOUNT_USER FOREIGN KEY (USERID) REFERENCES USERS(USERID)
);

CREATE SEQUENCE A_SEQ
START WITH 1
INCREMENT BY 1;
/
--TRIGGER
CREATE OR REPLACE TRIGGER a_trigger
BEFORE INSERT ON ACCOUNT
FOR EACH ROW
BEGIN
SELECT A_SEQ.NEXTVAL INTO :new.ACCOUNTID FROM DUAL;
END;

/



INSERT INTO USERS(FIRSTNAME, LASTNAME, EMAIL, PASSWORD)
VALUES ('Gen', 'Bo', 'test', 'Qwe123');

select * from USERS;

INSERT INTO ACCOUNT (USERID, BALANCE, TYPEID)
VALUES (1, 1000000, 1);

select * from ACCOUNT;

UPDATE USERS SET PASSWORD = 'Qwert12345'  WHERE USERID = 1;

COMMIT;
